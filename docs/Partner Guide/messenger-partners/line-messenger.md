---
title: LINE Messenger
excerpt: Messenger Partner
deprecated: false
hidden: false
metadata:
  title: ''
  description: ''
  robots: index
next:
  description: ''
---
# Overview

[LINE](https://line.me/en/), one of the world's most popular instant messaging platforms, is used by millions of highly-engaged users. Through LINE, brands can engage with their customers effectively by providing a rich messaging experience. CleverTap and LINE integration allows you to leverage advanced segmentation, predictive capabilities, personalization, and triggering features. You can message your LINE users the Line messaging API. 

> üìò Availability
> 
> This feature is available only for verified or premium LINE accounts. For more information about account types, refer to Account Types of [LINE Official Account](https://www.linebiz.com/jp-en/service/line-official-account/account-type/).

# Integrate CleverTap with LINE Messenger

The following are the major steps to perform this integration:

1. [Collect customer LINE IDs](doc:line-messenger#collect-customer-line-ids).
2. [Save the user's LINE ID on CleverTap](doc:line-messenger#save-users-line-id-on-clevertap).
3. [Save the LINE push message API as a Webhook endpoint in Clevertap](doc:line-messenger#save-line-push-message-api-as-a-webhook-endpoint-in-clevertap). 
4. [Create a Campaign to Reach your LINE Followers](doc:line-messenger#create-a-campaign-to-reach-your-line-followers). 

## Collect Customer LINE IDs

To send messages in LINE, you need the users' LINE IDs to identify the user and interact with them consistently. LINE IDs are not the same as the user‚Äôs LINE usernames. LINE IDs are generated by LINE and can be used when interacting with LINE APIs.  
LINE IDs can be obtained using the LINE [User ID API](https://developers.line.biz/en/reference/messaging-api/#get-follower-ids). This endpoint returns a list of all the LINE IDs for your contacts on the LINE official account or contacts that have sent you a message and have not blocked you.  
When sending a GET request to the <https://api.line.me/v2/bot/followers/ids> endpoint, you get the LINE IDs of users following your account.

## Save User's LINE ID on CleverTap

After obtaining the list of LINE IDs, you can send it to Clevertap as a custom user property as `lineID` to each user's profile. You can upload `LineID` to a user's profile by using [APIs](doc:upload-user-profiles-api) or [uploading them as CSVs](doc:csv-upload).

## Save LINE Push Message API as a Webhook Endpoint in CleverTap

To save LINE Push Message API as a webhook endpoint in CleverTap:

1. Navigate to _Settings_ > _Channels_ > _Webhooks_ from the CleverTap dashboard.
2. Click  **+Add Webhook**. The _Create webhook template_ popup opens.

[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/f71335d-Create_webhook_template_popup.png",
        "Create Webhook campaign",
        1012
      ],
      "align": "center",
      "sizing": "80",
      "border": true,
      "caption": "Create Webhook Template"
    }
  ]
}
[/block]

3. Enter the following details:

[block:parameters]
{
  "data": {
    "h-0": "Field",
    "h-1": "Description",
    "0-0": "Name",
    "0-1": "Enter the name for your webhook endpoint.",
    "1-0": "HTTP Method",
    "1-1": "Select POST from the dropdown list.",
    "2-0": "Destination URL",
    "2-1": "Enter the following URL in this field:  \n<https://api.line.me/v2/bot/message/push>"
  },
  "cols": 2,
  "rows": 3,
  "align": [
    "left",
    "left"
  ]
}
[/block]

4. Toggle ON the _Header parameters_ to add the following Request Headers to the payload:

| Key           | Value                            |
| :------------ | :------------------------------- |
| Content-Type  | application/json                 |
| Authorization | Bearer \<{channel access token}> |

For more about getting channel access tokens from LINE, refer to [Types of Channel access tokens](https://developers.line.biz/en/docs/messaging-api/channel-access-tokens/#types-of-channel-access-tokens).

[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/59fe9d7-Header_parameters.png",
        "Add request headers to Webhook payload",
        2236
      ],
      "align": "center",
      "sizing": "80",
      "border": true,
      "caption": "Add Request Headers to Payload"
    }
  ]
}
[/block]



5. Click **Create** to save the webhook endpoint.

## Create a Campaign to Reach your LINE Followers

To create a campaign for your LINE users:

1. From the CleverTap dashboard, select _Campaigns_.
2. Click **+ Campaign**.
3. From the Messaging Channels list, select _Webhooks_.

[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/e8cd8a4-Create_Campaign_Webhook_.png",
        "Select Webhooks from channels list",
        5652
      ],
      "align": "center",
      "border": true,
      "caption": "Select Webhooks from Channels List"
    }
  ]
}
[/block]

4. Enter the required details for _Start here_ section and select the target segment under _Who_ section.
5. Select _JSON_ from the _Webhook format_ dropdown and select the _Custom body_ option to create a custom body for the request.
6. Add the body to the request for different types of messages as follows:

   - **Simple Text Message** 

```json
{ "to": "@Profile - LineID | default: " N.A" ", 
"messages":[ { "type":"text", "text":"Hello, world1" } ] }
```



[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/f25ac49-Simple_Text_Message.png",
        "Sample JSON Body Request for Simple Text Messages",
        3114
      ],
      "align": "center",
      "border": true,
      "caption": "Sample JSON Body Request for Simple Text Messages"
    }
  ]
}
[/block]



- **Image Message** 

```json
{ "to": "@Profile - LineID | default: " N.A" ", 
"messages":[ { "type": "image", "originalContentUrl": "https://example.com/original.jpg", "previewImageUrl": "https://example.com/preview.jpg" } ]}
```



[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/4bb2e21-Image_Message.png",
        "Sample JSON Body Request for Image Message",
        3112
      ],
      "align": "center",
      "border": true,
      "caption": "Sample JSON Body Request for Image Message"
    }
  ]
}
[/block]



- **Video Message**

```json
{ "to": "@Profile - LineID | default: " N.A" ", 
"messages":[ { "type": "video", "originalContentUrl": "https://example.com/original.mp4", "previewImageUrl": "https://example.com/preview.jpg" } ]}
```



[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/454bd5c-Video_Message.png",
        "Sample JSON Body Request for Video Message",
        3136
      ],
      "align": "center",
      "border": true,
      "caption": "Sample JSON Body Request for Video Message"
    }
  ]
}
[/block]



> üìò Note
> 
> @Profile - LineID | default: "N.A" personalization fetches the `LineID` from the user's profile.  
> For the ‚Äúto‚Äù key, enter '@' under the _value_ field. Select LineID and provide a default value for the profiles that do not have a LineID (assuming LineID is the user property Key against which you have uploaded user Line ID using API or CSV upload).

[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/6104dac-Set_up_default_value_for_LineID.png",
        "Fetching User's Profile",
        3200
      ],
      "align": "center",
      "border": true,
      "caption": "Fetching User's Profile"
    }
  ]
}
[/block]

7. Define the schedule for your webhook campaign and publish the campaign.

For more information about webhook campaigns, refer to the [Create Webhook Campaigns](doc:create-message-webhook) section.